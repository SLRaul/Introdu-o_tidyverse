---
title: "Introdução ao Tidyverse"
author: "Daniel Jacinto, Jamily Santos e Raul Lima"
date: "29 de abril de 2019"
output:
  slidy_presentation: default
  beamer_presentation:
    colortheme: dolphin
    fonttheme: structurebold
    theme: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## O que é tidyverse?
- Hadley Wickham
 
 - Tidyverse
    
    - readr
    
    - tidyr
 
    - dplyr
 
    - ggplot
    
    - forcats


```{r, fig.align='right', out.width='25%', fig.cap=''}
knitr::include_graphics('Hadley_Wickham.jpg')
```

## Readr
  - Qual seu diferencial?
  
  O readr pacote foi desenvolvido para lidar rapidamente com a leitura em grandes arquivos planos.
  
  O pacote fornece substituições para funções como read.table() e read.csv(). As funções análogas em readr são read_table() e read_csv(). Essas funções são frequentemente muito mais rápidas do que seus análogos R e fornecem alguns outros recursos interessantes.

```{r, echo=TRUE, collapse=TRUE,results='hide',message=FALSE}
#Utilizando função nativa
read.csv("fullbusiness.csv")
#Utilizando função do pacote readr
library(readr)
read_csv("fullbusiness.csv")
```
##

  - Arquivo separado por " , "
```{r, echo=TRUE, collapse=TRUE,results='hide',message=FALSE,error=FALSE}
#read_csv()
```
  - Arquivo separado por " ; "
```{r, echo=TRUE, collapse=TRUE,results='hide',message=FALSE,error=FALSE}
#read_csv2()
```
  - Arquivo separado por espaço
```{r, echo=TRUE, collapse=TRUE,results='hide',message=FALSE,error=FALSE}
#read_tsv()
#read_table2()
```
## Exercícios

  - Importe o banco de dados fullbusiness
  
  - Importe o banco de dados titanic
  
  - Importe o banco de dados urine

## Complemento

  - Dados do tipo Excel (.xlsx)
```{r, echo=TRUE, collapse=TRUE,results='hide',message=FALSE,error=FALSE}
#read_xlsx()
```

  - Importar banco de dados melanoma

```{r, echo=TRUE, collapse=TRUE,results='hide',message=FALSE}
library(readxl)
read_xlsx("melanoma.xlsx")
```


## dplyr

- `select()`

- `filter()`

- `group_by()` e `summarise()`

- `arrange()`



## `select()`

Função que seleciona ou retira determinada variável do seu data frame (coluna, campo, feature, ...).

Selecionando variáveis:
```{r, message=FALSE, echo=TRUE}
library(dplyr)
fullbusiness <- read_csv("fullbusiness.csv")
#head(fullbusiness)
renda_zona <- fullbusiness %>% select(Zone, Income)
#head(renda_zona)
```
Retirando variáveis:
```{r, echo=TRUE}
sem_spam <- fullbusiness %>% select(-SPAM)
#head(sem_spam)
```

## `filter()`

Função que cria condições para selecionar determinado tipo de variável.

Utilizando o banco de dados fullbusiness pedemos separar pela categoria da variavel level.
```{r,echo=TRUE, collapse=FALSE}
table(fullbusiness$Level)
medium <- fullbusiness %>% filter(Level == "Medium")
table(medium$Level)
```

## `group_by()` e `summarise()`

São operadores que trabalham na agregação dos dados, ou seja, é feito um resumo dos dados para cada grupo.

O `group_by()` separa os grupos que se deseja selecionar, já o `summarise()` faz o resumo dos dados para cada grupo.

```{r, echo=TRUE}
library(TeachingSampling)
data("BigLucy")
#head(BigLucy)

exemplo <- BigLucy %>% filter(Years >= 10) %>% group_by(Level) %>%
summarise(total_empresas = n(), media_renda = sum(Income), media_taxas = mean(Taxes))
exemplo
```



## `arrange()`
Serve para organizar os dados em sua ordenação.

```{r, echo=TRUE}
fullbusiness %>% select(Level, Employees, Income) %>%
group_by(Level) %>%
summarise(mean_employees = mean(Employees), mean_income = mean(Income)) %>% arrange()
```


## Tidyr

- `gather()`

- `separeter()`

- `spread()`

- `unite()`

## ggplot

## forcats